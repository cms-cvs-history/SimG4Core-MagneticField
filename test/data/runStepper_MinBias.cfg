process PROD  = {

   service = MessageLogger  {
      untracked vstring destinations = {"cout"}      
      untracked vstring categories = { "FieldStepWatcher" }             
      untracked PSet cout = { 
         untracked PSet default = { untracked int32 limit = 0 }
	 untracked PSet FieldStepWatcher = { untracked int32 limit = -1 }
      }
   }
   
   service = Timing {}

   service = RandomNumberGeneratorService {
      untracked uint32 sourceSeed = 123456789
      PSet moduleSeeds = {
         untracked uint32 VtxSmeared = 12345
         untracked uint32 g4SimHits = 9876
      }
   }

   service = DaqMonitorROOTBackEnd{ }
   
   ###include "SimGeneral/HepPDTESSource/data/pdt.cfi"
   include "SimGeneral/HepPDTESSource/data/pythiapdt.cfi"

   untracked PSet maxEvents = {untracked int32 input = 100}
   include "GeneratorInterface/Pythia6Interface/data/PythiaSourceMinBias.cfi"
   replace PythiaSource.pythiaHepMCVerbosity = false
   replace PythiaSource.pythiaPylistVerbosity = 0
      
   include "IOMC/EventVertexGenerators/data/VtxSmearedGauss.cfi"

   #Geometry
   #   
   include "SimG4Core/MagneticField/test/data/testGeometryEmptyXML.cfi"
   #include "SimG4Core/MagneticField/test/data/testGeometryFilledXML.cfi"
   es_module = TrackerGeometricDetESModule {}

   # Magnetic Field
   #
   include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
   
   # Geant4-based CMS Det.Simulation
   #
   # the 'replace' option below show how to override the default
   # setting of mag.field key (tu turn it off)
   #
   include "SimG4Core/Application/data/g4SimHits.cfi"
   replace g4SimHits.MagneticField.UseLocalMagFieldManager = false
   replace g4SimHits.MagneticField.delta = 1.
   replace g4SimHits.MagneticField.Verbosity = false
   replace g4SimHits.MagneticField.ConfGlobalMFM.OCMS = {
     string Type = "CMSIMField"
     string Stepper = "G4ClassicalRK4"
     PSet G4ClassicalRK4 = {
       double MinStep = 0.1 # in mm
       double DeltaChord = 0.001 # in mm
       double DeltaOneStep = 0.001 # in mm
       double DeltaIntersection = 0.0001 # in mm
       untracked double DeltaIntersectionAndOneStep = -1.
       untracked double MaximumLoopCounts = 1000.
       untracked double MinimumEpsilonStep = 0.00001  # in mm
       untracked double MaximumEpsilonStep = 0.01 # in mm
     }
   }
#   replace g4SimHits.MagneticField.ConfGlobalMFM.OCMS = {
#     string Type = "CMSIMField"
#     string Stepper = "G4SimpleRunge"
#     PSet G4SimpleRunge = {
#       double MinStep = 0.1 # in mm
#       double DeltaChord = 0.001 # in mm
#       double DeltaOneStep = 0.001 # in mm
#       double DeltaIntersection = 0.0001 # in mm
#       untracked double DeltaIntersectionAndOneStep = -1.
#       untracked double MaximumLoopCounts = 1000.
#       untracked double MinimumEpsilonStep = 0.00001  # in mm
#       untracked double MaximumEpsilonStep = 0.01 # in mm
#     }
#   }
#   replace g4SimHits.MagneticField.ConfGlobalMFM.OCMS = {
#     string Type = "CMSIMField"
#     string Stepper = "G4SimpleHeum"
#     PSet G4SimpleHeum = {
#       double MinStep = 0.1 # in mm
#       double DeltaChord = 0.001 # in mm
#       double DeltaOneStep = 0.001 # in mm
#       double DeltaIntersection = 0.0001 # in mm
#       untracked double DeltaIntersectionAndOneStep = -1.
#       untracked double MaximumLoopCounts = 1000.
#       untracked double MinimumEpsilonStep = 0.00001  # in mm
#       untracked double MaximumEpsilonStep = 0.01 # in mm
#     }
#   }
#   replace g4SimHits.MagneticField.ConfGlobalMFM.OCMS = {
#     string Type = "CMSIMField"
#     string Stepper = "G4CashKarpRKF45"
#     PSet G4CashKarpRKF45 = {
#       double MinStep = 0.1 # in mm
#       double DeltaChord = 0.001 # in mm
#       double DeltaOneStep = 0.001 # in mm
#       double DeltaIntersection = 0.0001 # in mm
#       untracked double DeltaIntersectionAndOneStep = -1.
#       untracked double MaximumLoopCounts = 1000.
#       untracked double MinimumEpsilonStep = 0.00001  # in mm
#       untracked double MaximumEpsilonStep = 0.01 # in mm
#     }
#   }
#   replace g4SimHits.MagneticField.ConfGlobalMFM.OCMS = {
#     string Type = "CMSIMField"
#     string Stepper = "G4ImplicitEuler"
#     PSet G4ImplicitEuler = {
#       double MinStep = 0.1 # in mm
#       double DeltaChord = 0.001 # in mm
#       double DeltaOneStep = 0.001 # in mm
#       double DeltaIntersection = 0.0001 # in mm
#       untracked double DeltaIntersectionAndOneStep = -1.
#       untracked double MaximumLoopCounts = 1000.
#       untracked double MinimumEpsilonStep = 0.00001  # in mm
#       untracked double MaximumEpsilonStep = 0.01 # in mm
#     }
#   }
#   replace g4SimHits.MagneticField.ConfGlobalMFM.OCMS = {
#     string Type = "CMSIMField"
#     string Stepper = "G4HelixImplicitEuler"
#     PSet G4HelixImplicitEuler = {
#       double MinStep = 0.1 # in mm
#       double DeltaChord = 0.001 # in mm
#       double DeltaOneStep = 0.001 # in mm
#       double DeltaIntersection = 0.0001 # in mm
#       untracked double DeltaIntersectionAndOneStep = -1.
#       untracked double MaximumLoopCounts = 1000.
#       untracked double MinimumEpsilonStep = 0.00001  # in mm
#       untracked double MaximumEpsilonStep = 0.01 # in mm
#     }
#   }
#   replace g4SimHits.MagneticField.ConfGlobalMFM.OCMS = {
#     string Type = "CMSIMField"
#     string Stepper = "G4ExplicitEuler"
#     PSet G4ExplicitEuler = {
#       double MinStep = 0.1 # in mm
#       double DeltaChord = 0.001 # in mm
#       double DeltaOneStep = 0.001 # in mm
#       double DeltaIntersection = 0.0001 # in mm
#       untracked double DeltaIntersectionAndOneStep = -1.
#       untracked double MaximumLoopCounts = 1000.
#       untracked double MinimumEpsilonStep = 0.00001  # in mm
#       untracked double MaximumEpsilonStep = 0.01 # in mm
#     }
#   }
#   replace g4SimHits.MagneticField.ConfGlobalMFM.OCMS = {
#     string Type = "CMSIMField"
#     string Stepper = "G4HelixExplicitEuler"
#     PSet G4HelixExplicitEuler = {
#       double MinStep = 0.1 # in mm
#       double DeltaChord = 0.001 # in mm
#       double DeltaOneStep = 0.001 # in mm
#       double DeltaIntersection = 0.0001 # in mm
#       untracked double DeltaIntersectionAndOneStep = -1.
#       untracked double MaximumLoopCounts = 1000.
#       untracked double MinimumEpsilonStep = 0.00001  # in mm
#       untracked double MaximumEpsilonStep = 0.01 # in mm
#     }
#   }
#   replace g4SimHits.MagneticField.ConfGlobalMFM.OCMS = {
#     string Type = "CMSIMField"
#     string Stepper = "G4HelixSimpleRunge"
#     PSet G4HelixSimpleRunge = {
#       double MinStep = 0.1 # in mm
#       double DeltaChord = 0.001 # in mm
#       double DeltaOneStep = 0.001 # in mm
#       double DeltaIntersection = 0.0001 # in mm
#       untracked double DeltaIntersectionAndOneStep = -1.
#       untracked double MaximumLoopCounts = 1000.
#       untracked double MinimumEpsilonStep = 0.00001  # in mm
#       untracked double MaximumEpsilonStep = 0.01 # in mm
#     }
#   }
#   replace g4SimHits.MagneticField.ConfGlobalMFM.OCMS = {
#     string Type = "CMSIMField"
#     string Stepper = "G4HelixHeum"
#     PSet G4HelixHeum = {
#       double MinStep = 0.1 # in mm
#       double DeltaChord = 0.001 # in mm
#       double DeltaOneStep = 0.001 # in mm
#       double DeltaIntersection = 0.0001 # in mm
#       untracked double DeltaIntersectionAndOneStep = -1.
#       untracked double MaximumLoopCounts = 1000.
#       untracked double MinimumEpsilonStep = 0.00001  # in mm
#       untracked double MaximumEpsilonStep = 0.01 # in mm
#     }
#   }
   replace g4SimHits.Watchers = {
      {string type              = "FieldStepWatcher"
       untracked int32  DepthLevel = 3
       untracked string OutputFile = "fieldStudyMinBiasEmpty.root"
      }
   }
		  
   path p1 = { VtxSmeared, g4SimHits }
   
}		
